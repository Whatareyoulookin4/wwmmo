{% extends "admin/skeleton.html" %}
{% block "title" %}Empires{% end %}
{% block "head" %}
  <script src="/realms/{{realm}}/js/tmpl.js"></script>
  <script src="/realms/{{realm}}/js/hashparams.js"></script>
  <script src="/realms/{{realm}}/js/tabs.js"></script>
  <script src="/realms/{{realm}}/js/time.js"></script>
  <script src="https://www.google.com/jsapi"></script>
  <link rel="stylesheet" href="/realms/{{realm}}/admin/empire/search.css">
{% end %}

{% block "content" %}
  <div id="refresh-ranks">
    <input type="button" value="Refresh ranks" title="Click here to refresh the ranks now.">
  </div>
  <h1>Empires</h1>
  <div id="search-time"></div>
  <div id="search-results"></div>
  <form id="search">
    <div>
      <label for="search-value">Search:</label>
      <div class="hack"><input type="text" id="search-value" placeholder="ID, email or name" /></div>
    </div>
    <div>
      <label for="search-sort">Sort:</label>
      <div class="hack"><select id="search-sort">
        <option value="rank">Rank</option>
        <option value="signup_date_asc">Oldest first</option>
        <option value="signup_date_desc">Newest first</option>
      </select></div>
    </div>
    <input type="submit" value="Search" />
  </form>
  <table id="empire-list">
    <thead>
      <tr>
        <th width="20"></th>
        <th width="40">Shield</th>
        <th>Name</th>
        <th width="20" align="center">Rank</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      
    </tfoot>
  </table>
  <script type="text/html" id="empire-row">
    <tr>
      <td align="center"><%=key%></td>
      <td align="center"><img src="/realms/{{realm}}/empires/<%=key%>/shield?final=1&size=32" width="32" height="32" /></td>
      <td>
        <a href="javascript:;" class="empire-name" data-id="<%=key%>">
          <%=display_name%>
        </a>
        <div style="color: #aaa;" class="email-addr"><%=email%></div></td>
      <td align="center"><% if (rank) { %><%=rank.rank%><% } %></td>
    </tr>
  </script>
  <script type="text/html" id="empire-details">
    <ul class="tabs">
      <li><a href="javascript:;" data-tab="empire-details-tab" class="selected">Details</a>
      <li><a href="javascript:;" data-tab="empire-logins-tab">Recent logins</a>
      <li><a href="javascript:;" data-tab="empire-sitrep-tab">Sit. Reports</a>
      <li><a href="javascript:;" data-tab="empire-notifications-tab">Notifications</a>
    </ul>

    <div id="empire-details-tab" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div id="empire-logins-tab" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div id="empire-sitrep-tab" style="display: none;">
      <div class="spinner"></div>
    </div>
    <div id="empire-notifications-tab" style="display: none;">
      <div class="spinner"></div>
    </div>
  </script>
  <script src="/realms/{{realm}}/admin/empire/search.js"></script>
{% end %}
