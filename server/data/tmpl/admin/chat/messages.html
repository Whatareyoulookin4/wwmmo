{% extends "admin/skeleton.html" %}
{% block "title" %}Chat{% end %}
{% block "head" %}
  <script src="/realms/{{realm}}/js/tmpl.js"></script>
  <script src="/realms/{{realm}}/js/empirestore.js"></script>
  <link rel="stylesheet" href="/realms/{{realm}}/admin/chat/messages.css">
{% end %}

{% block "content" %}
  <h1>Chat</h1>
  <section id="messages"></section>
  <section id="conversations">
    <div class="conv" data-convid="-1">All messages</div>
    <div class="conv" data-convid="0">Global chat</div>
    <div class="conv" data-convid="0">Alliance chat</div>
    <script>
      var conversations = {};
    </script>
    {% for conv in conversations %}
      <div class="conv" data-convid="{{ conv.ID }}">
        {% for participant in conv.participants %}
          {{ empires[participant.empireID].displayName }},
        {% end %}
        <script>
          var name = "{% for participant in conv.participants %}{{ empires[participant.empireID].displayName }}, {% end %}";
          name = name.substr(0, name.length - 2);
          conversations[{{conv.ID}}] = name;
        </script>
      </div>
    {% end %}
  </section>
  <form id="sendmsg">
    <div class="hack"><input type="text"></div>
    <input type="submit" value="Send">
  </form>
  <script src="/realms/{{realm}}/admin/chat/messages.js"></script>
{% end %}